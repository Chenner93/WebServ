<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Erreur - Webserv</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			min-height: 100vh;
			display: flex;
			justify-content: center;
			align-items: center;
			overflow: hidden;
			position: relative;
		}

		/* Couleurs selon le type d'erreur */
		body.error-4xx {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		}

		body.error-5xx {
			background: linear-gradient(135deg, #d32f2f 0%, #c62828 100%);
		}

		body.error-3xx {
			background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
		}

		.stars {
			position: absolute;
			width: 100%;
			height: 100%;
			overflow: hidden;
		}

		.star {
			position: absolute;
			width: 2px;
			height: 2px;
			background: white;
			border-radius: 50%;
			animation: twinkle 3s infinite;
		}

		@keyframes twinkle {
			0%, 100% { opacity: 0.3; }
			50% { opacity: 1; }
		}

		.container {
			text-align: center;
			color: white;
			z-index: 10;
			padding: 20px;
			max-width: 800px;
		}

		.error-icon {
			font-size: 120px;
			margin-bottom: 20px;
			animation: bounce 2s ease-in-out infinite;
		}

		@keyframes bounce {
			0%, 100% { transform: translateY(0); }
			50% { transform: translateY(-20px); }
		}

		.error-code {
			font-size: 150px;
			font-weight: bold;
			line-height: 1;
			margin-bottom: 20px;
			text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
			animation: fadeIn 0.8s ease-in;
		}

		.error-title {
			font-size: 42px;
			margin-bottom: 15px;
			animation: fadeIn 1s ease-in;
		}

		.error-message {
			font-size: 20px;
			margin-bottom: 15px;
			opacity: 0.95;
			animation: fadeIn 1.2s ease-in;
			line-height: 1.6;
		}

		@keyframes fadeIn {
			from { opacity: 0; transform: translateY(20px); }
			to { opacity: 1; transform: translateY(0); }
		}

		.error-details {
			background: rgba(0, 0, 0, 0.3);
			backdrop-filter: blur(10px);
			padding: 20px;
			border-radius: 15px;
			margin: 30px 0;
			border: 1px solid rgba(255, 255, 255, 0.2);
			animation: fadeIn 1.5s ease-in;
		}

		.detail-item {
			padding: 10px;
			margin: 5px 0;
			text-align: left;
			display: flex;
			justify-content: space-between;
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		}

		.detail-item:last-child {
			border-bottom: none;
		}

		.detail-label {
			font-weight: bold;
			opacity: 0.9;
		}

		.detail-value {
			font-family: 'Courier New', monospace;
			opacity: 0.8;
		}

		.btn-container {
			display: flex;
			gap: 1rem;
			justify-content: center;
			flex-wrap: wrap;
			margin-top: 30px;
			animation: fadeIn 1.8s ease-in;
		}

		.btn {
			display: inline-block;
			padding: 15px 40px;
			background: white;
			color: #333;
			text-decoration: none;
			border-radius: 50px;
			font-weight: bold;
			font-size: 16px;
			transition: all 0.3s ease;
			box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
		}

		.btn:hover {
			transform: translateY(-5px);
			box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
			background: #f5f5f5;
		}

		.btn-secondary {
			background: transparent;
			color: white;
			border: 2px solid white;
		}

		.btn-secondary:hover {
			background: white;
			color: #333;
		}

		.suggestions {
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			padding: 20px;
			border-radius: 15px;
			margin-top: 30px;
			border: 1px solid rgba(255, 255, 255, 0.2);
			text-align: left;
		}

		.suggestions h3 {
			margin-bottom: 15px;
			font-size: 20px;
		}

		.suggestions ul {
			list-style: none;
			padding-left: 0;
		}

		.suggestions li {
			padding: 8px 0;
			padding-left: 25px;
			position: relative;
		}

		.suggestions li:before {
			content: "‚Üí";
			position: absolute;
			left: 0;
			color: white;
		}

		@media (max-width: 768px) {
			.error-code {
				font-size: 100px;
			}
			.error-title {
				font-size: 32px;
			}
			.error-message {
				font-size: 16px;
			}
			.error-icon {
				font-size: 80px;
			}
			.detail-item {
				flex-direction: column;
				gap: 5px;
			}
		}
	</style>
</head>
<body>
	<div class="stars" id="stars"></div>

	<div class="container">
		<div class="error-icon" id="errorIcon">‚ö†Ô∏è</div>
		<div class="error-code" id="errorCode">Error</div>
		<h1 class="error-title" id="errorTitle">Erreur</h1>
		<p class="error-message" id="errorMessage">Une erreur s'est produite</p>

		<div class="error-details">
			<div class="detail-item">
				<span class="detail-label">Code d'erreur:</span>
				<span class="detail-value" id="detailCode">-</span>
			</div>
			<div class="detail-item">
				<span class="detail-label">Serveur:</span>
				<span class="detail-value">Webserv</span>
			</div>
			<div class="detail-item">
				<span class="detail-label">H√¥te:</span>
				<span class="detail-value" id="detailHost">example.com</span>
			</div>
			<div class="detail-item">
				<span class="detail-label">Timestamp:</span>
				<span class="detail-value" id="timestamp">-</span>
			</div>
		</div>

		<div class="suggestions" id="suggestions">
			<h3>üí° Suggestions:</h3>
			<ul id="suggestionsList"></ul>
		</div>

		<div class="btn-container">
			<a href="/" class="btn">Retour √† l'accueil</a>
			<a href="javascript:history.back()" class="btn btn-secondary">Page pr√©c√©dente</a>
		</div>
	</div>

	<script>
		// Dictionnaire des erreurs HTTP
		const errorData = {
			// Erreurs 4xx - Client
			400: {
				icon: '‚ö†Ô∏è',
				title: 'Requ√™te Incorrecte',
				message: 'La requ√™te envoy√©e au serveur est invalide ou malform√©e.',
				suggestions: [
					'V√©rifiez la syntaxe de votre requ√™te',
					'Assurez-vous que tous les param√®tres requis sont pr√©sents',
					'V√©rifiez le format des donn√©es envoy√©es'
				],
				category: '4xx'
			},
			401: {
				icon: 'üîí',
				title: 'Non Autoris√©',
				message: 'Vous devez vous authentifier pour acc√©der √† cette ressource.',
				suggestions: [
					'V√©rifiez vos identifiants de connexion',
					'Assurez-vous d\'√™tre connect√©',
					'Contactez l\'administrateur si le probl√®me persiste'
				],
				category: '4xx'
			},
			403: {
				icon: 'üö´',
				title: 'Acc√®s Interdit',
				message: 'Vous n\'avez pas les permissions n√©cessaires pour acc√©der √† cette ressource.',
				suggestions: [
					'V√©rifiez vos droits d\'acc√®s',
					'Contactez l\'administrateur pour obtenir les permissions',
					'Assurez-vous d\'acc√©der √† la bonne ressource'
				],
				category: '4xx'
			},
			404: {
				icon: 'üîç',
				title: 'Page Non Trouv√©e',
				message: 'La page que vous recherchez n\'existe pas ou a √©t√© d√©plac√©e.',
				suggestions: [
					'V√©rifiez l\'URL saisie',
					'Utilisez le menu de navigation',
					'Retournez √† la page d\'accueil'
				],
				category: '4xx'
			},
			405: {
				icon: 'üö∑',
				title: 'M√©thode Non Autoris√©e',
				message: 'La m√©thode HTTP utilis√©e n\'est pas autoris√©e pour cette ressource.',
				suggestions: [
					'V√©rifiez la m√©thode HTTP (GET, POST, DELETE)',
					'Consultez la documentation de l\'API',
					'Utilisez la m√©thode appropri√©e'
				],
				category: '4xx'
			},
			408: {
				icon: '‚è±Ô∏è',
				title: 'D√©lai d\'Attente D√©pass√©',
				message: 'Le serveur a expir√© en attendant la requ√™te.',
				suggestions: [
					'V√©rifiez votre connexion internet',
					'R√©essayez la requ√™te',
					'Contactez le support si le probl√®me persiste'
				],
				category: '4xx'
			},
			413: {
				icon: 'üì¶',
				title: 'Contenu Trop Volumineux',
				message: 'La taille de la requ√™te d√©passe la limite autoris√©e par le serveur.',
				suggestions: [
					'R√©duisez la taille des donn√©es envoy√©es',
					'V√©rifiez la limite maximale (10MB ou 50MB)',
					'Divisez votre envoi en plusieurs requ√™tes'
				],
				category: '4xx'
			},
			429: {
				icon: 'üö¶',
				title: 'Trop de Requ√™tes',
				message: 'Vous avez envoy√© trop de requ√™tes dans un laps de temps donn√©.',
				suggestions: [
					'Attendez quelques instants avant de r√©essayer',
					'R√©duisez la fr√©quence de vos requ√™tes',
					'Consultez les limites de taux de l\'API'
				],
				category: '4xx'
			},
			// Erreurs 5xx - Serveur
			500: {
				icon: 'üí•',
				title: 'Erreur Interne du Serveur',
				message: 'Le serveur a rencontr√© une erreur inattendue lors du traitement de la requ√™te.',
				suggestions: [
					'R√©essayez dans quelques instants',
					'V√©rifiez l\'√©tat du serveur',
					'Contactez l\'administrateur si le probl√®me persiste'
				],
				category: '5xx'
			},
			502: {
				icon: 'üîó',
				title: 'Bad Gateway',
				message: 'Le serveur a re√ßu une r√©ponse invalide d\'un serveur en amont.',
				suggestions: [
					'Attendez quelques minutes et r√©essayez',
					'Le probl√®me est probablement temporaire',
					'Contactez le support si l\'erreur persiste'
				],
				category: '5xx'
			},
			503: {
				icon: 'üîß',
				title: 'Service Indisponible',
				message: 'Le serveur est temporairement indisponible, g√©n√©ralement en maintenance.',
				suggestions: [
					'R√©essayez dans quelques minutes',
					'Le serveur est peut-√™tre en maintenance',
					'Consultez la page de statut du service'
				],
				category: '5xx'
			},
			504: {
				icon: '‚è∞',
				title: 'Gateway Timeout',
				message: 'Le serveur n\'a pas re√ßu de r√©ponse √† temps d\'un serveur en amont.',
				suggestions: [
					'R√©essayez la requ√™te',
					'V√©rifiez votre connexion internet',
					'Le serveur distant peut √™tre surcharg√©'
				],
				category: '5xx'
			},
			// Erreurs 3xx - Redirection
			301: {
				icon: '‚û°Ô∏è',
				title: 'D√©plac√© D√©finitivement',
				message: 'La ressource a √©t√© d√©plac√©e de mani√®re permanente vers une nouvelle URL.',
				suggestions: [
					'Mettez √† jour vos liens',
					'Utilisez la nouvelle URL',
					'Les redirections automatiques devraient fonctionner'
				],
				category: '3xx'
			},
			302: {
				icon: 'üîÑ',
				title: 'D√©plac√© Temporairement',
				message: 'La ressource est temporairement disponible √† une autre adresse.',
				suggestions: [
					'Suivez la redirection automatique',
					'L\'URL originale reste valide',
					'Pas besoin de mettre √† jour vos liens'
				],
				category: '3xx'
			}
		};

		// Fonction pour obtenir le code d'erreur depuis l'URL
		function getErrorCode() {
			const urlParams = new URLSearchParams(window.location.search);
			const codeFromParam = urlParams.get('code');

			// Si le code est dans les param√®tres
			if (codeFromParam) {
				return codeFromParam;
			}

			// Si le code est dans le path (ex: /error/404)
			const pathMatch = window.location.pathname.match(/\/error\/(\d+)/);
			if (pathMatch) {
				return pathMatch[1];
			}

			// Si le code est dans le hash (ex: #404)
			const hashMatch = window.location.hash.match(/#(\d+)/);
			if (hashMatch) {
				return hashMatch[1];
			}
			
			// Par d√©faut, retourner 404
			return '404';
		}

		// Fonction pour afficher l'erreur
		function displayError() {
			const code = getErrorCode();
			const error = errorData[code] || errorData[404];

			// Appliquer la classe de couleur au body
			document.body.className = `error-${error.category}`;

			// Mettre √† jour le contenu
			document.getElementById('errorIcon').textContent = error.icon;
			document.getElementById('errorCode').textContent = code;
			document.getElementById('errorTitle').textContent = error.title;
			document.getElementById('errorMessage').textContent = error.message;
			document.getElementById('detailCode').textContent = `${code} ${error.title}`;
			document.getElementById('detailHost').textContent = window.location.host || 'example.com';

			// Timestamp
			const now = new Date();
			document.getElementById('timestamp').textContent = now.toLocaleString('fr-FR');

			// Suggestions
			const suggestionsList = document.getElementById('suggestionsList');
			suggestionsList.innerHTML = '';
			error.suggestions.forEach(suggestion => {
				const li = document.createElement('li');
				li.textContent = suggestion;
				suggestionsList.appendChild(li);
			});
			
			// Mettre √† jour le titre de la page
			document.title = `Erreur ${code} - ${error.title}`;
		}

		// G√©n√©rer les √©toiles
		const starsContainer = document.getElementById('stars');
		for (let i = 0; i < 100; i++) {
			const star = document.createElement('div');
			star.className = 'star';
			star.style.left = Math.random() * 100 + '%';
			star.style.top = Math.random() * 100 + '%';
			star.style.animationDelay = Math.random() * 3 + 's';
			starsContainer.appendChild(star);
		}

		// Afficher l'erreur au chargement
		displayError();
	</script>
</body>
</html>
